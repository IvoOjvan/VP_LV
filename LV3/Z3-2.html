<!doctype html>
<html>
<head>
    <title>Z3-2</title>
    <meta charset="utf-8" />
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v3.min.js"></script>
</head>
<body>
    <script>
        var width = 1500;
        var height = 1000;

        var svg = d3.select("body")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        var data = [
            { "x": 100, "y": 100, "width": 50, "height": 50 },
            { "x": 200, "y": 100, "width": 50, "height": 50 },
            { "x": 300, "y": 100, "width": 50, "height": 50 },
            { "x": 400, "y": 100, "width": 50, "height": 50 },
            { "x": 500, "y": 100, "width": 50, "height": 50 },
            { "x": 600, "y": 100, "width": 50, "height": 50 },
            { "x": 700, "y": 100, "width": 50, "height": 50 },
            { "x": 800, "y": 100, "width": 50, "height": 50 },
            { "x": 900, "y": 100, "width": 50, "height": 50 },
            { "x": 1000, "y": 100, "width": 50, "height": 50 }
        ];

        var rects = svg.selectAll("rect")
            .data(data)
            .enter()
            .append("rect")
            .attr("x", function (d) { return d.x; })
            .attr("y", function (d) { return d.y; })
            .attr("width", function (d) { return d.width; })
            .attr("height", function (d) { return d.height; })
            .attr("fill", "red")
            .attr("stroke", "red")
            .attr("opacity", 1);

        rects.transition()
            .duration(function (d) { return Math.floor(Math.random() * 5000) + 2000; })
            .attr("width", width / 3)
            .attr("height", width / 3)
            .attr("opacity", 0);

        setTimeout(function(){
            data.forEach(function(d) {
                d.x = Math.floor(Math.random() * 1000) + 100;
                d.y = Math.floor(Math.random() * 600) + 200;
                d.width = Math.floor(Math.random() * 75) + 30;
                d.height = d.width; 
            });

            // Remove existing rectangles
            svg.selectAll("rect").remove();

            // Enter new rectangles
            svg.selectAll("rect")
                .data(data)
                .enter()
                .append("rect")
                .attr("x", function (d) { return d.x; })
                .attr("y", function (d) { return d.y; })
                .attr("width", function (d) { return d.width; })
                .attr("height", function (d) { return d.height; })
                .attr("fill", "blue")
                .attr("stroke", "blue")
                .attr("opacity", 1)
                .transition()
                    .duration(function (d) { return Math.floor(Math.random() * 5000) + 2000; })
                    .attr("width", width / 3)
                    .attr("height", width / 3)
                    .attr("opacity", 0);
        }, 7000);
    </script>
</body>
</html>
